<%# 非同期実装中 %>
<%# function parseHashBangArgs(aURL) {
  var tab = aURL.slice(aURL.indexOf('=') + 1);
  return tab;
} %>
<%# 
if (location.host == nomi-joy/admin/events?room=303){
  alert('createアクション');
} %>
 alert('createアクション');


<%# / リロード時 %>
<%# $(function() {
  // リロード前に保存されたタブIDを取得(初回アクセス時は未保存なので2つのタブともに選択されていない状態)
  var currentTab = localStorage.getItem('current');
  if (currentTab) {
    // 毎回リロード時に選択されているとするclassのcurrentを削除しlocalStorageの情報を元に再付与している(ちょっと非効率かも)
    $('li a').removeClass('current');
    var tabli = currentTab.replace(/tab/, 'tabs');
    $('#' + tabli).addClass('current');
    var tabs = switchContent(currentTab);
    // currentクラスを持つコンテンツは表示、そうじゃないのは非表示にしている
    // fadeを使う理由は無いので表示時間を0にするならshowを使えば良いかも知れない
    $('#tabContent' + ' ' + '#' + currentTab).fadeIn(0);
    $('#tabContent' + ' ' + tabs).fadeOut(0);
  } else {
    $('#tabContent' + ' ' + '#tab1').fadeIn(0);
  }
}); %>

<%# // タブのクリック時
// タブを選択すると選択したタブのhrefからどのタブが選択されたかを取得
// リロード同様に一度すべての選択状態を解除してから再付与
// 最後にlocalStorageに選択したタブの情報を保存 %>
<%# $('#tabs li a').click(function() {
  delMsg();
  var url = $(this).attr('href');
  var selectedTab = parseHashBangArgs(url);
  var selectedConte = selectedTab.replace(/tabs/, 'tab');
  if (selectedTab) {
    $('li a').removeClass('current');
    $('#' + selectedTab).addClass('current');
    var tabs = switchContent(selectedConte);
    $('#tabContent' + ' ' + '#' + selectedConte).fadeIn(0);
    $('#tabContent' + ' ' + tabs).fadeOut(0);
    localStorage.setItem('current', selectedConte);
  }
}); %>